<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UK Contractor Tax Calculator 2025/26 ‚Äî Ltd vs PAYE Comparison</title>
<meta name="description" content="Free UK contractor tax calculator for 2025/26. Compare Ltd company salary/dividend split vs PAYE employment. Day rate input, pension, IR35, spouse splitting.">
<meta name="keywords" content="UK contractor tax calculator, Ltd vs PAYE, salary dividend split, contractor tax, IR35, UK tax calculator 2025 2026, day rate calculator">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4816327121027857" crossorigin="anonymous"></script>
<meta property="og:title" content="UK Contractor Tax Calculator ‚Äî Ltd vs PAYE">
<meta property="og:description" content="See exactly how much more you keep through a Ltd company vs PAYE. Free, instant, no signup.">
<meta property="og:type" content="website">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Inter', -apple-system, sans-serif; background: #fafafa; color: #111827; line-height: 1.6; }
.container { max-width: 800px; margin: 0 auto; padding: 2rem 1.5rem; }
h1 { font-size: 1.75rem; font-weight: 700; margin-bottom: 0.25rem; }
.subtitle { color: #6b7280; font-size: 0.95rem; margin-bottom: 2rem; }
.input-section { background: #fff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; }
.input-section h3 { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 0.75rem; }
.input-group { margin-bottom: 1rem; }
.input-group:last-child { margin-bottom: 0; }
label { display: block; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 0.35rem; }
input[type="number"], input[type="range"] { width: 100%; }
input[type="number"] { font-family: 'Inter', sans-serif; font-size: 1.5rem; font-weight: 600; border: 1px solid #d1d5db; border-radius: 6px; padding: 0.5rem 0.75rem; outline: none; font-variant-numeric: tabular-nums; }
input[type="number"].small { font-size: 1.1rem; }
input[type="number"]:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
.range-row { display: flex; align-items: center; gap: 1rem; }
.range-row input[type="range"] { flex: 1; }
.range-value { font-size: 1.1rem; font-weight: 600; min-width: 80px; text-align: right; font-variant-numeric: tabular-nums; }
.input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
@media (max-width: 500px) { .input-row { grid-template-columns: 1fr; } }
.input-mode-toggle { display: flex; background: #f3f4f6; border-radius: 6px; padding: 3px; margin-bottom: 1rem; }
.input-mode-toggle button { flex: 1; padding: 0.4rem 0.75rem; border: none; background: transparent; font-family: 'Inter', sans-serif; font-size: 0.8rem; font-weight: 600; color: #6b7280; border-radius: 4px; cursor: pointer; transition: all 0.15s; }
.input-mode-toggle button.active { background: #fff; color: #111827; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.toggle-row { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; }
.toggle { position: relative; width: 44px; height: 24px; flex-shrink: 0; }
.toggle input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; inset: 0; background: #d1d5db; border-radius: 12px; cursor: pointer; transition: 0.2s; }
.toggle-slider::before { content: ''; position: absolute; width: 18px; height: 18px; left: 3px; bottom: 3px; background: #fff; border-radius: 50%; transition: 0.2s; }
.toggle input:checked + .toggle-slider { background: #3b82f6; }
.toggle input:checked + .toggle-slider::before { transform: translateX(20px); }
.toggle-label { font-size: 0.85rem; font-weight: 500; color: #374151; }
.toggle-hint { font-size: 0.75rem; color: #9ca3af; margin-left: auto; }
.results { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
@media (max-width: 600px) { .results { grid-template-columns: 1fr; } }
.results.three-col { grid-template-columns: 1fr 1fr 1fr; }
@media (max-width: 700px) { .results.three-col { grid-template-columns: 1fr; } }
.card { background: #fff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1.25rem; }
.card h3 { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 0.75rem; }
.card .big-number { font-size: 2rem; font-weight: 700; font-variant-numeric: tabular-nums; }
.card .effective-rate { font-size: 0.85rem; color: #6b7280; margin-top: 0.25rem; }
.card.ltd { border-left: 3px solid #10b981; }
.card.paye { border-left: 3px solid #6b7280; }
.card.ir35 { border-left: 3px solid #f59e0b; }
.card.savings { border-left: 3px solid #3b82f6; }
.savings .big-number { color: #3b82f6; }
.ltd .big-number { color: #10b981; }
.ir35 .big-number { color: #f59e0b; }
.breakdown { background: #fff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1.25rem; margin-bottom: 1.5rem; }
.breakdown h3 { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 0.75rem; }
table { width: 100%; border-collapse: collapse; font-variant-numeric: tabular-nums; }
th { text-align: left; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #9ca3af; padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb; }
td { padding: 0.5rem 0; border-bottom: 1px solid #f3f4f6; font-size: 0.9rem; }
td:nth-child(2), td:nth-child(3), td:nth-child(4), th:nth-child(2), th:nth-child(3), th:nth-child(4) { text-align: right; }
tr:last-child td { border-bottom: none; font-weight: 600; }
.bar-chart { margin-top: 1.5rem; }
.bar-row { display: flex; align-items: center; margin-bottom: 0.75rem; }
.bar-label { width: 70px; font-size: 0.8rem; font-weight: 600; color: #6b7280; }
.bar-track { flex: 1; height: 28px; background: #f3f4f6; border-radius: 4px; display: flex; overflow: hidden; }
.bar-fill { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; color: #fff; transition: width 0.3s ease; }
.bar-fill.tax { background: #ef4444; }
.bar-fill.net { background: #10b981; }
.bar-fill.ir35-net { background: #f59e0b; }
.bar-fill.ir35-tax { background: #dc2626; }
footer { text-align: center; color: #9ca3af; font-size: 0.8rem; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e5e7eb; }
footer a { color: #6b7280; }
.disclaimer { background: #fffbeb; border: 1px solid #fde68a; border-radius: 6px; padding: 0.75rem 1rem; font-size: 0.8rem; color: #92400e; margin-bottom: 1.5rem; }
.hidden { display: none !important; }
.computed-revenue { font-size: 0.85rem; color: #6b7280; margin-top: 0.25rem; font-weight: 500; }
</style>
</head>
<body>
<div class="container">
<h1>üá¨üáß UK Contractor Tax Calculator</h1>
<p class="subtitle">2025/26 tax year ¬∑ Ltd company vs PAYE ¬∑ Instant results, no signup</p>

<div class="disclaimer">
‚ö†Ô∏è This calculator provides estimates based on standard UK tax rates for 2025/26 (from 6 April 2025). It assumes optimal salary/dividend extraction for Ltd. PAYE calculations treat the input as total employment cost to client (salary + employer NI). Not financial advice ‚Äî consult an accountant for your specific situation.
</div>

<!-- Income Input -->
<div class="input-section">
<h3>Income</h3>
<div class="input-mode-toggle">
<button id="mode-annual" class="active" onclick="setMode('annual')">Annual Revenue</button>
<button id="mode-dayrate" onclick="setMode('dayrate')">Day Rate</button>
</div>
<div id="annual-input">
<div class="input-group">
<label>Annual Gross Revenue / Contract Value (¬£)</label>
<input type="number" id="revenue" value="100000" min="0" step="1000">
</div>
</div>
<div id="dayrate-input" class="hidden">
<div class="input-row">
<div class="input-group">
<label>Daily Rate (¬£)</label>
<input type="number" id="dayrate" value="500" min="0" step="10">
</div>
<div class="input-group">
<label>Working Days / Year</label>
<input type="number" id="workdays" class="small" value="220" min="1" max="365" step="1">
</div>
</div>
<div class="computed-revenue" id="computed-revenue">= ¬£110,000 per year</div>
</div>
</div>

<!-- Deductions -->
<div class="input-section">
<h3>Deductions & Contributions</h3>
<div class="input-group">
<label>Business Expenses (¬£/year, excl. salary)</label>
<div class="range-row">
<input type="range" id="expenses" min="0" max="50000" step="500" value="5000">
<span class="range-value" id="expenses-display">¬£5,000</span>
</div>
</div>
<div class="input-group">
<label>Pension Contributions (¬£/year)</label>
<div class="range-row">
<input type="range" id="pension" min="0" max="60000" step="500" value="0">
<span class="range-value" id="pension-display">¬£0</span>
</div>
<div style="font-size:0.75rem; color:#9ca3af; margin-top:0.25rem;">Ltd: paid as employer contribution (reduces corp tax). PAYE: salary sacrifice (reduces income tax + NI). Max ¬£60k/year.</div>
</div>
</div>

<!-- Options -->
<div class="input-section">
<h3>Options</h3>
<div class="toggle-row">
<label class="toggle"><input type="checkbox" id="ir35-toggle" onchange="update()"><span class="toggle-slider"></span></label>
<span class="toggle-label">Show IR35 Inside (umbrella)</span>
<span class="toggle-hint">What if you're caught inside IR35?</span>
</div>
<div class="toggle-row">
<label class="toggle"><input type="checkbox" id="spouse-toggle" onchange="update()"><span class="toggle-slider"></span></label>
<span class="toggle-label">Spouse as shareholder (50/50 dividends)</span>
<span class="toggle-hint">Split dividends across two personal allowances</span>
</div>
</div>

<!-- Results -->
<div class="results" id="results-grid">
<div class="card ltd">
<h3 id="ltd-title">Ltd Company ‚Äî Take Home</h3>
<div class="big-number" id="ltd-net">‚Äî</div>
<div class="effective-rate" id="ltd-rate">‚Äî effective tax rate</div>
</div>
<div class="card paye">
<h3>PAYE Employment ‚Äî Take Home</h3>
<div class="big-number" id="paye-net">‚Äî</div>
<div class="effective-rate" id="paye-rate">‚Äî effective tax rate</div>
</div>
<div class="card ir35 hidden" id="ir35-card">
<h3>IR35 Inside (Umbrella) ‚Äî Take Home</h3>
<div class="big-number" id="ir35-net">‚Äî</div>
<div class="effective-rate" id="ir35-rate">‚Äî effective tax rate</div>
</div>
</div>

<div class="results" style="grid-template-columns: 1fr;">
<div class="card savings">
<h3>You Save With a Ltd Company</h3>
<div class="big-number" id="savings">‚Äî</div>
<div class="effective-rate" id="savings-pct">‚Äî more per year</div>
</div>
</div>

<div class="breakdown">
<h3>Tax Breakdown Comparison</h3>
<table>
<thead><tr><th></th><th>Ltd Company</th><th>PAYE</th><th class="hidden ir35-col">IR35 Inside</th></tr></thead>
<tbody>
<tr><td>Gross Revenue</td><td id="t-gross-ltd">‚Äî</td><td id="t-gross-paye">‚Äî</td><td class="hidden ir35-col" id="t-gross-ir35">‚Äî</td></tr>
<tr><td>Business Expenses</td><td id="t-expenses-ltd">‚Äî</td><td>‚Äî</td><td class="hidden ir35-col">‚Äî</td></tr>
<tr><td>Pension Contribution</td><td id="t-pension-ltd">‚Äî</td><td id="t-pension-paye">‚Äî</td><td class="hidden ir35-col" id="t-pension-ir35">‚Äî</td></tr>
<tr class="hidden ir35-col"><td>Umbrella Margin</td><td>‚Äî</td><td>‚Äî</td><td id="t-umbrella">‚Äî</td></tr>
<tr><td>Salary</td><td id="t-salary">‚Äî</td><td id="t-paye-salary">‚Äî</td><td class="hidden ir35-col" id="t-ir35-salary">‚Äî</td></tr>
<tr><td>Corporation Tax</td><td id="t-corp">‚Äî</td><td>‚Äî</td><td class="hidden ir35-col">‚Äî</td></tr>
<tr><td>Income Tax</td><td id="t-it-ltd">‚Äî</td><td id="t-it-paye">‚Äî</td><td class="hidden ir35-col" id="t-it-ir35">‚Äî</td></tr>
<tr><td>Employee NI</td><td id="t-ni-ltd">‚Äî</td><td id="t-ni-paye">‚Äî</td><td class="hidden ir35-col" id="t-ni-ir35">‚Äî</td></tr>
<tr><td>Employer NI</td><td id="t-employer-ni-ltd">‚Äî</td><td id="t-employer-ni-paye">‚Äî</td><td class="hidden ir35-col" id="t-employer-ni-ir35">‚Äî</td></tr>
<tr><td>Dividend Tax</td><td id="t-div">‚Äî</td><td>‚Äî</td><td class="hidden ir35-col">‚Äî</td></tr>
<tr style="border-top: 2px solid #e5e7eb;"><td>Total Tax + Costs</td><td id="t-total-ltd">‚Äî</td><td id="t-total-paye">‚Äî</td><td class="hidden ir35-col" id="t-total-ir35">‚Äî</td></tr>
<tr><td>Net Take Home</td><td id="t-net-ltd">‚Äî</td><td id="t-net-paye">‚Äî</td><td class="hidden ir35-col" id="t-net-ir35">‚Äî</td></tr>
</tbody>
</table>
</div>

<div class="breakdown">
<h3>Visual Comparison</h3>
<div class="bar-chart">
<div class="bar-row">
<span class="bar-label">Ltd</span>
<div class="bar-track">
<div class="bar-fill net" id="bar-ltd-net" style="width:0%"></div>
<div class="bar-fill tax" id="bar-ltd-tax" style="width:0%"></div>
</div>
</div>
<div class="bar-row">
<span class="bar-label">PAYE</span>
<div class="bar-track">
<div class="bar-fill net" id="bar-paye-net" style="width:0%"></div>
<div class="bar-fill tax" id="bar-paye-tax" style="width:0%"></div>
</div>
</div>
<div class="bar-row hidden" id="bar-ir35-row">
<span class="bar-label">IR35</span>
<div class="bar-track">
<div class="bar-fill ir35-net" id="bar-ir35-net" style="width:0%"></div>
<div class="bar-fill tax" id="bar-ir35-tax" style="width:0%"></div>
</div>
</div>
</div>
<div style="display:flex; gap:1rem; margin-top:0.5rem; font-size:0.75rem; color:#6b7280;">
<span>üü© Take home</span><span>üü• Tax</span><span class="hidden" id="bar-ir35-legend">üü® IR35 take home</span>
</div>
</div>

<!-- MONETIZATION SECTION -->
<div class="breakdown" style="background: #fef3c7; border-color: #fbbf24;">
<h3>üí° Find This Calculator Useful?</h3>
<p style="font-size: 0.9rem; color: #374151; margin-bottom: 1rem;">This tool is free forever, but development and hosting cost money. If it saved you time or money, consider supporting it:</p>
<div style="display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; justify-content: center; margin-bottom: 1rem;">
<a href="https://www.buymeacoffee.com/anjordev" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: #ff813f; color: white; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.95rem; transition: all 0.2s;">
‚òï Buy me a coffee
</a>
<a href="https://buy.stripe.com/test_00g00000000000000000" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: #6366f1; color: white; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.95rem; transition: all 0.2s;">
üí≥ Tip ¬£5
</a>
<a href="https://buy.stripe.com/test_00g00000000000000001" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: #059669; color: white; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.95rem; transition: all 0.2s;">
üíñ Tip ¬£10
</a>
</div>
<p style="font-size: 0.8rem; color: #6b7280; text-align: center;">100% goes toward keeping this tool free and adding more features</p>
</div>

<div class="breakdown" style="background: #f0fdf4; border-color: #bbf7d0;">
<h3>Need an Accountant for Your Ltd Company?</h3>
<p style="font-size: 0.85rem; color: #374151; margin-bottom: 0.75rem;">These specialist contractor accountants can help you optimise your tax position:</p>
<div style="display: flex; flex-wrap: wrap; gap: 0.75rem;">
<a href="https://www.sjdaccountancy.com/" target="_blank" rel="noopener" style="display: inline-block; padding: 0.5rem 1rem; background: #fff; border: 1px solid #d1d5db; border-radius: 6px; text-decoration: none; color: #111827; font-size: 0.85rem; font-weight: 500;">SJD Accountancy ‚Üí</a>
<a href="https://www.crunch.co.uk/" target="_blank" rel="noopener" style="display: inline-block; padding: 0.5rem 1rem; background: #fff; border: 1px solid #d1d5db; border-radius: 6px; text-decoration: none; color: #111827; font-size: 0.85rem; font-weight: 500;">Crunch ‚Üí</a>
<a href="https://www.gorillaaccounting.com/" target="_blank" rel="noopener" style="display: inline-block; padding: 0.5rem 1rem; background: #fff; border: 1px solid #d1d5db; border-radius: 6px; text-decoration: none; color: #111827; font-size: 0.85rem; font-weight: 500;">Gorilla Accounting ‚Üí</a>
</div>
</div>

<footer>
<p>Built by <a href="https://github.com/anjor">anjor</a> ¬∑ Tax rates: HMRC 2025/26 ¬∑ <a href="https://github.com/anjor/uk-contractor-tax-calc">Source on GitHub</a></p>
<p style="margin-top:0.25rem;">Free forever. No signup required.</p>
</footer>
</div>

<script>
const fmt = n => '¬£' + Math.round(n).toLocaleString('en-GB');
const pct = n => isNaN(n) ? '0%' : (n * 100).toFixed(1) + '%';

let inputMode = 'annual';

function setMode(mode) {
  inputMode = mode;
  document.getElementById('mode-annual').classList.toggle('active', mode === 'annual');
  document.getElementById('mode-dayrate').classList.toggle('active', mode === 'dayrate');
  document.getElementById('annual-input').classList.toggle('hidden', mode !== 'annual');
  document.getElementById('dayrate-input').classList.toggle('hidden', mode !== 'dayrate');
  update();
}

function getRevenue() {
  if (inputMode === 'dayrate') {
    const rate = parseFloat(document.getElementById('dayrate').value) || 0;
    const days = parseFloat(document.getElementById('workdays').value) || 220;
    const rev = rate * days;
    document.getElementById('computed-revenue').textContent = '= ' + fmt(rev) + ' per year';
    return rev;
  }
  return parseFloat(document.getElementById('revenue').value) || 0;
}

function calcEmployeeNI(salary) {
  const pt = 12570, ul = 50270;
  if (salary <= pt) return 0;
  if (salary <= ul) return (salary - pt) * 0.08;
  return (ul - pt) * 0.08 + (salary - ul) * 0.02;
}

function calcEmployerNI(salary) {
  const st = 5000;
  if (salary <= st) return 0;
  return (salary - st) * 0.15;
}

function calcIncomeTax(income) {
  const pa = income > 100000 ? Math.max(0, 12570 - (income - 100000) / 2) : 12570;
  const taxable = Math.max(0, income - pa);
  if (taxable <= 37700) return taxable * 0.20;
  if (taxable <= 125140) return 37700 * 0.20 + (taxable - 37700) * 0.40;
  return 37700 * 0.20 + (125140 - 37700) * 0.40 + (taxable - 125140) * 0.45;
}

function calcDividendTax(dividends, usedBasicBand) {
  // usedBasicBand = how much of the basic rate band the salary already used
  const allowance = 500;
  const taxable = Math.max(0, dividends - allowance);
  const remainingBasic = Math.max(0, 37700 - usedBasicBand);
  const remainingHigher = 125140 - 12570 - 37700; // higher rate band width = 74870
  
  let tax = 0;
  let remaining = taxable;
  
  // Basic rate portion
  const basicPortion = Math.min(remaining, remainingBasic);
  tax += basicPortion * 0.0875;
  remaining -= basicPortion;
  
  // Higher rate portion
  const higherBandRemaining = Math.max(0, 125140 - 12570 - usedBasicBand - remainingBasic);
  // Simpler: just use bands relative to total income
  // Actually let me keep it simple like original for now
  if (remaining > 0) {
    const higherPortion = Math.min(remaining, Math.max(0, 87430 - usedBasicBand - remainingBasic));
    tax += higherPortion * 0.3375;
    remaining -= higherPortion;
  }
  if (remaining > 0) {
    tax += remaining * 0.3935;
  }
  return tax;
}

function calcDividendTaxSimple(dividends) {
  const allowance = 500;
  const taxable = Math.max(0, dividends - allowance);
  if (taxable <= 37700) return taxable * 0.0875;
  if (taxable <= 125140) return 37700 * 0.0875 + (taxable - 37700) * 0.3375;
  return 37700 * 0.0875 + (125140 - 37700) * 0.3375 + (taxable - 125140) * 0.3935;
}

function calcCorpTax(profits) {
  if (profits <= 0) return 0;
  if (profits <= 50000) return profits * 0.19;
  if (profits >= 250000) return profits * 0.25;
  const base = profits * 0.25;
  const relief = ((250000 - profits) * (profits - 50000)) / (250000 - 50000) * 0.015;
  return base - relief;
}

function calcLtd(revenue, expenses, pension, spouseSplit) {
  const salary = 12570;
  const employerNI = calcEmployerNI(salary);
  // Pension paid as employer contribution ‚Äî deductible expense for corp tax
  const profits = Math.max(0, revenue - expenses - salary - employerNI - pension);
  const corpTax = calcCorpTax(profits);
  const distributable = profits - corpTax;
  
  let dividendTax, net;
  if (spouseSplit && distributable > 0) {
    // Split dividends 50/50 between director and spouse
    const halfDiv = distributable / 2;
    // Director: salary + half dividends
    const dirDivTax = calcDividendTaxSimple(halfDiv);
    // Spouse: just dividends (assuming no other income, so full personal allowance unused but dividends taxed separately)
    const spouseDivTax = calcDividendTaxSimple(halfDiv);
    dividendTax = dirDivTax + spouseDivTax;
  } else {
    dividendTax = calcDividendTaxSimple(distributable);
  }
  
  const employeeNI = calcEmployeeNI(salary);
  const incomeTax = calcIncomeTax(salary);
  const totalTax = corpTax + incomeTax + employeeNI + employerNI + dividendTax;
  net = revenue - expenses - pension - totalTax;
  
  return { salary, dividends: distributable, corpTax, incomeTax, ni: employeeNI + employerNI, dividendTax, totalTax, net, pension };
}

function calcPAYE(contractValue, pension) {
  // For PAYE comparison: treat contractValue as total employment cost to client
  // Total cost = salary + employer NI + employer pension contribution
  // Need to solve: salary + employerNI(salary) + pension = contractValue
  
  const totalCost = Math.max(0, contractValue);
  const available = totalCost - pension;
  
  // Iteratively solve for salary where salary + employerNI(salary) = available
  let salary;
  if (available <= 5000) {
    salary = available; // Below employer NI threshold
  } else {
    // Solve: salary + (salary - 5000) * 0.15 = available
    // 1.15 * salary - 750 = available
    // salary = (available + 750) / 1.15
    salary = (available + 750) / 1.15;
  }
  salary = Math.max(0, salary);
  
  const employerNI = calcEmployerNI(salary);
  
  // Apply pension as salary sacrifice (reduces taxable salary)
  const taxableSalary = Math.max(0, salary - pension);
  const incomeTax = calcIncomeTax(taxableSalary);
  const employeeNI = calcEmployeeNI(taxableSalary);
  
  const net = taxableSalary - incomeTax - employeeNI;
  
  // For comparison: total tax/costs from the contract value
  const totalTax = incomeTax + employeeNI + employerNI;
  
  return { salary, incomeTax, ni: employeeNI, employerNI, totalTax, net, pension };
}

function calcIR35(revenue, pension) {
  // Inside IR35 via umbrella: umbrella takes margin, then you're paid as PAYE
  // Employer NI comes out of the contract rate, plus umbrella margin
  const umbrellaMargin = 30 * 12; // ~¬£30/month typical
  const afterMargin = revenue - umbrellaMargin;
  // Employer NI is deducted from the contract rate
  // afterMargin = salary + employerNI  =>  salary = afterMargin / 1.15 (approx for above threshold)
  // More precisely: salary + max(0, (salary - 5000) * 0.15) = afterMargin - pension
  const available = afterMargin - pension;
  // Solve: s + (s - 5000)*0.15 = available  =>  1.15s = available + 750  => s = (available + 750) / 1.15
  let salary;
  if (available <= 5000) {
    salary = available;
  } else {
    salary = (available + 750) / 1.15;
  }
  salary = Math.max(0, salary);
  
  const employerNI = calcEmployerNI(salary);
  const employeeNI = calcEmployeeNI(salary);
  const incomeTax = calcIncomeTax(salary);
  const totalTax = incomeTax + employeeNI + employerNI + umbrellaMargin;
  const net = salary - incomeTax - employeeNI;
  
  return { salary, incomeTax, ni: employeeNI, employerNI: employerNI, totalTax, net, umbrellaMargin, pension };
}

function update() {
  const revenue = getRevenue();
  const expenses = parseFloat(document.getElementById('expenses').value) || 0;
  const pension = parseFloat(document.getElementById('pension').value) || 0;
  const showIR35 = document.getElementById('ir35-toggle').checked;
  const spouseSplit = document.getElementById('spouse-toggle').checked;
  
  document.getElementById('expenses-display').textContent = fmt(expenses);
  document.getElementById('pension-display').textContent = fmt(pension);

  const ltd = calcLtd(revenue, expenses, pension, spouseSplit);
  const paye = calcPAYE(revenue, pension);
  
  // IR35 visibility
  document.getElementById('ir35-card').classList.toggle('hidden', !showIR35);
  document.getElementById('bar-ir35-row').classList.toggle('hidden', !showIR35);
  document.getElementById('bar-ir35-legend').classList.toggle('hidden', !showIR35);
  document.querySelectorAll('.ir35-col').forEach(el => el.classList.toggle('hidden', !showIR35));
  
  // Results grid columns
  const grid = document.getElementById('results-grid');
  grid.style.gridTemplateColumns = showIR35 ? '1fr 1fr 1fr' : '1fr 1fr';
  if (window.innerWidth <= 600) grid.style.gridTemplateColumns = '1fr';

  // Ltd title
  document.getElementById('ltd-title').textContent = spouseSplit ? 'Ltd Company (Spouse Split) ‚Äî Take Home' : 'Ltd Company ‚Äî Take Home';

  document.getElementById('ltd-net').textContent = fmt(ltd.net);
  document.getElementById('ltd-rate').textContent = revenue > 0 ? pct(ltd.totalTax / revenue) + ' effective tax rate' : '‚Äî';
  document.getElementById('paye-net').textContent = fmt(paye.net);
  document.getElementById('paye-rate').textContent = revenue > 0 ? pct(paye.totalTax / revenue) + ' effective tax rate' : '‚Äî';

  if (showIR35) {
    const ir35 = calcIR35(revenue, pension);
    document.getElementById('ir35-net').textContent = fmt(ir35.net);
    document.getElementById('ir35-rate').textContent = revenue > 0 ? pct(ir35.totalTax / revenue) + ' effective tax rate' : '‚Äî';
    
    document.getElementById('t-gross-ir35').textContent = fmt(revenue);
    document.getElementById('t-umbrella').textContent = fmt(ir35.umbrellaMargin);
    document.getElementById('t-pension-ir35').textContent = fmt(pension);
    document.getElementById('t-ir35-salary').textContent = fmt(ir35.salary);
    document.getElementById('t-it-ir35').textContent = fmt(ir35.incomeTax);
    document.getElementById('t-ni-ir35').textContent = fmt(ir35.ni);
    document.getElementById('t-employer-ni-ir35').textContent = fmt(ir35.employerNI);
    document.getElementById('t-total-ir35').textContent = fmt(ir35.totalTax);
    document.getElementById('t-net-ir35').textContent = fmt(ir35.net);
    
    // IR35 bar
    const ir35NetPct = (ir35.net / revenue * 100);
    const ir35TaxPct = (ir35.totalTax / revenue * 100);
    document.getElementById('bar-ir35-net').style.width = ir35NetPct + '%';
    document.getElementById('bar-ir35-tax').style.width = ir35TaxPct + '%';
  }

  const saving = ltd.net - paye.net;
  document.getElementById('savings').textContent = fmt(Math.max(0, saving));
  document.getElementById('savings-pct').textContent = saving > 0 ? fmt(saving) + ' more per year with Ltd' : 'PAYE is better at this level';

  // Table
  document.getElementById('t-gross-ltd').textContent = fmt(revenue);
  document.getElementById('t-gross-paye').textContent = fmt(revenue);
  document.getElementById('t-expenses-ltd').textContent = fmt(expenses);
  document.getElementById('t-pension-ltd').textContent = fmt(pension);
  document.getElementById('t-pension-paye').textContent = fmt(pension);
  document.getElementById('t-salary').textContent = fmt(ltd.salary);
  document.getElementById('t-paye-salary').textContent = fmt(paye.salary);
  document.getElementById('t-corp').textContent = fmt(ltd.corpTax);
  document.getElementById('t-it-ltd').textContent = fmt(ltd.incomeTax);
  document.getElementById('t-it-paye').textContent = fmt(paye.incomeTax);
  document.getElementById('t-ni-ltd').textContent = fmt(calcEmployeeNI(ltd.salary));
  document.getElementById('t-ni-paye').textContent = fmt(paye.ni);
  document.getElementById('t-employer-ni-ltd').textContent = fmt(calcEmployerNI(ltd.salary));
  document.getElementById('t-employer-ni-paye').textContent = fmt(paye.employerNI);
  document.getElementById('t-div').textContent = fmt(ltd.dividendTax);
  document.getElementById('t-total-ltd').textContent = fmt(ltd.totalTax);
  document.getElementById('t-total-paye').textContent = fmt(paye.totalTax);
  document.getElementById('t-net-ltd').textContent = fmt(ltd.net);
  document.getElementById('t-net-paye').textContent = fmt(paye.net);

  // Bars
  if (revenue > 0) {
    document.getElementById('bar-ltd-net').style.width = (ltd.net / revenue * 100) + '%';
    document.getElementById('bar-ltd-tax').style.width = ((ltd.totalTax + expenses + pension) / revenue * 100) + '%';
    document.getElementById('bar-paye-net').style.width = (paye.net / revenue * 100) + '%';
    document.getElementById('bar-paye-tax').style.width = ((paye.totalTax + pension) / revenue * 100) + '%';
  }
}

// Event listeners
document.getElementById('revenue').addEventListener('input', update);
document.getElementById('expenses').addEventListener('input', update);
document.getElementById('pension').addEventListener('input', update);
document.getElementById('dayrate').addEventListener('input', update);
document.getElementById('workdays').addEventListener('input', update);
update();
</script>
<footer style="max-width:800px;margin:2rem auto;padding:1rem 1.5rem;border-top:1px solid #e5e7eb;text-align:center;font-size:0.8rem;color:#9ca3af;">
  <a href="about.html" style="color:#6b7280;text-decoration:none;margin:0 0.75rem;">About</a>
  <a href="privacy.html" style="color:#6b7280;text-decoration:none;margin:0 0.75rem;">Privacy Policy</a>
  <a href="https://github.com/anjor/uk-contractor-tax-calc" style="color:#6b7280;text-decoration:none;margin:0 0.75rem;" rel="noopener">GitHub</a>
  <p style="margin-top:0.5rem;">¬© 2026 UK Contractor Tax Calculator. Not financial advice.</p>
</footer>
</body>
</html>
